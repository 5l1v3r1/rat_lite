language : cpp

matrix:
  include:
    - os: osx
    - os: linux
      sudo: required
      
before_install:
  - if [[ "${TRAVIS_OS_NAME}" == "linux" ]]; then
      mkdir cmake && travis_retry wget --no-check-certificate --quiet -O - "https://cmake.org/files/v3.7/cmake-3.7.2-Linux-x86_64.tar.gz" | tar --strip-components=1 -xz -C cmake
      export PATH=cmakeup/cmake/bin:${PATH}
    else
      brew upgrade cmake || brew install cmake
    fi
  - if [ "$TRAVIS_OS_NAME" = "osx" ]; then
        brew update && brew outdated boost || brew upgrade boost && brew install fltk openssl libjpeg-turbo;
    fi
  - if [ "$TRAVIS_OS_NAME" = "linux" ]; then
        sudo apt-get install -y libfltk1.3-dev;
    fi  
    
script:
  - if [ "$TRAVIS_OS_NAME" = "osx" ]; then
        cmake -DOPENSSL_ROOT_DIR=/usr/local/opt/openssl/ . && make;
    fi
  - if [ "$TRAVIS_OS_NAME" = "linux" ]; then
       cmake . && make;
    fi  
